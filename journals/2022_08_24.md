- ![Taking-Kubernetes-from-Test-To-Production.pdf](../assets/Taking-Kubernetes-from-Test-To-Production_2021-11-30_1661324414772_0.pdf)
	- category:: book
	  tags:: #Reading #k8s #devops
	- ((630d703c-e77c-448f-bdf9-08aca5585c99))
		- 组织文化 [[康威定律]]
		- 复杂性
			- 为了达到一个可商用级别的微服务架构，需要付出很多基建成本。
		- 安全
			- 在安全需求方面，云原生和传统应用有着显著的差别。从容器化、CICD、混合云、外部组件等。云原生生态会面临更多的安全攻击。
	- k8s 本身在实际使用中的问题：它目前只关注服务的广度(大量部署)，没有关注在深度(安全和网络)。所以，为了让它能够生产可用，需要使用很多其他的外部组件和开源产品。
		-
	- 为了达成生产级别的 k8s，随着规模和使用需求，可能会按照下面的 3 种方式进行演进：
		- ((630d7352-1706-4d82-84de-278f8edb9be3))
			- ((630d7381-f481-47bd-982a-4857cafb3cd3))
			- 通过 Ingress Controller，可以增加系统`弹性`(对 service 的健康检查、metrics etc)；可以快速拓展等。
		- ((630d758a-06e2-407f-b282-bcc4647f7c82))
			- ((630d75ad-8e89-4b4c-87e4-ad795bf24650))
			- 可以用不同级别的安全防护：service 级别或者是 pod 级别
		- ((630d75e8-bf71-4ead-a7d3-b0fc04d75f00))
			- ((630d762f-b7f3-401f-89f7-77ac7027eff5))
	- 流量管理包括
		- 流量控制
			- 限流
			- 断路器
		- 流量分发
			- 灰度测试
			- 金丝雀发布 *为了保障新版本的稳定*
				- ((630d7dce-91fe-452e-ac2a-9d17dd09e998))
				- 按照比例、渐进式将流量发布到新版本。
			- A/B测试
			- 蓝绿发布
	- 安全问题
		- 基本介绍
			- ((630d88a6-391d-4216-b974-6febd7a6fa30))
				- 认证(Authentication) —— 从身份标识校验用户是否是他。通过如 JWT 来完成。
				- 授权(Authorization) —— 校验client是否有权限操作、访问资源。
			- ((630d8979-4e6a-4d75-9b03-3691de3acc35))
				- Nginx 说自己的优势在于，它可以很快地修复安全漏洞。而其他的 openresty 类产品需要更久的时间。
				- > 这有一定的道理，因为 Nginx 是上游。
			- ((630d8986-0204-4611-afab-e02aae1aa3e3))
			- ((630d8990-c80c-4adf-8b50-671ba844d051))
			- ((630d8a2a-afca-46a1-9354-3aa13a7be78e)) mTSL 是 client 和 server 之间都需要互相校验。被用于零信任框架中。
		- 实际示例：
			-
			-
			-